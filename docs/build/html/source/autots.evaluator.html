<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-P2KLF8302E"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-P2KLF8302E');
    </script>
    
    <title>autots.evaluator package &#8212; AutoTS 0.6.17 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=a4fa0645" />
    <script src="../_static/documentation_options.js?v=0d21fabb"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="autots.models package" href="autots.models.html" />
    <link rel="prev" title="autots.datasets package" href="autots.datasets.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="autots-evaluator-package">
<h1>autots.evaluator package<a class="headerlink" href="#autots-evaluator-package" title="Link to this heading">¶</a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading">¶</a></h2>
</section>
<section id="module-autots.evaluator.anomaly_detector">
<span id="autots-evaluator-anomaly-detector-module"></span><h2>autots.evaluator.anomaly_detector module<a class="headerlink" href="#module-autots.evaluator.anomaly_detector" title="Link to this heading">¶</a></h2>
<p>Anomaly Detector
Created on Mon Jul 18 14:19:55 2022</p>
<p>&#64;author: Colin</p>
<dl class="py class">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.AnomalyDetector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">autots.evaluator.anomaly_detector.</span></span><span class="sig-name descname"><span class="pre">AnomalyDetector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'multivariate'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'zscore'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'transformation_params':</span> <span class="pre">{0:</span> <span class="pre">{'datepart_method':</span> <span class="pre">'simple_3',</span> <span class="pre">'regression_model':</span> <span class="pre">{'model':</span> <span class="pre">'ElasticNet',</span> <span class="pre">'model_params':</span> <span class="pre">{}}}},</span> <span class="pre">'transformations':</span> <span class="pre">{0:</span> <span class="pre">'DatepartRegression'}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">isolated_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.AnomalyDetector" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.AnomalyDetector.detect">
<span class="sig-name descname"><span class="pre">detect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.AnomalyDetector.detect" title="Link to this definition">¶</a></dt>
<dd><p>All will return -1 for anomalies.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pd.DataFrame</em>) – pandas wide-style data</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>pd.DataFrame (classifications, -1 = outlier, 1 = not outlier), pd.DataFrame s(scores)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.AnomalyDetector.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.AnomalyDetector.fit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.AnomalyDetector.fit_anomaly_classifier">
<span class="sig-name descname"><span class="pre">fit_anomaly_classifier</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.AnomalyDetector.fit_anomaly_classifier" title="Link to this definition">¶</a></dt>
<dd><p>Fit a model to predict if a score is an anomaly.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.AnomalyDetector.get_new_params">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_new_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'random'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.AnomalyDetector.get_new_params" title="Link to this definition">¶</a></dt>
<dd><p>Generate random new parameter combinations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>method</strong> (<em>str</em>) – ‘fast’, ‘deep’, ‘default’, or any of the anomaly method names (ie ‘IQR’) to specify only that method</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.AnomalyDetector.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.AnomalyDetector.plot" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.AnomalyDetector.score_to_anomaly">
<span class="sig-name descname"><span class="pre">score_to_anomaly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scores</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.AnomalyDetector.score_to_anomaly" title="Link to this definition">¶</a></dt>
<dd><p>A DecisionTree model, used as models are nonstandard (and nonparametric).</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.HolidayDetector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">autots.evaluator.anomaly_detector.</span></span><span class="sig-name descname"><span class="pre">HolidayDetector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">anomaly_detector_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_occurrences</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">splash_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.65</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_dayofmonth_holidays</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_wkdom_holidays</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_wkdeom_holidays</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_lunar_holidays</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_lunar_weekday</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_islamic_holidays</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_hebrew_holidays</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_hindu_holidays</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'multivariate'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.HolidayDetector" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.HolidayDetector.dates_to_holidays">
<span class="sig-name descname"><span class="pre">dates_to_holidays</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">style</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'flag'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">holiday_impacts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.HolidayDetector.dates_to_holidays" title="Link to this definition">¶</a></dt>
<dd><p>Populate date information for a given pd.DatetimeIndex.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dates</strong> (<em>pd.DatetimeIndex</em>) – list of dates</p></li>
<li><p><strong>day_holidays</strong> (<em>pd.DataFrame</em>) – list of month/day holidays. Pass None if not available</p></li>
<li><p><strong>style</strong> (<em>str</em>) – option for how to return information
“long” - return date, name, series for all holidays in a long style dataframe
“impact” - returns dates, series with values of sum of impacts (if given) or joined string of holiday names
‘flag’ - return dates, holidays flag, (is not 0-1 but rather sum of input series impacted for that holiday and day)
‘prophet’ - return format required for prophet. Will need to be filtered on <cite>series</cite> for multivariate case
‘series_flag’ - dates, series 0/1 for if holiday occurred in any calendar</p></li>
<li><p><strong>holiday_impacts</strong> (<em>dict</em>) – a dict passed to .replace contaning values for holiday_names, or str ‘value’ or ‘anomaly_score’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.HolidayDetector.detect">
<span class="sig-name descname"><span class="pre">detect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.HolidayDetector.detect" title="Link to this definition">¶</a></dt>
<dd><p>Run holiday detection. Input wide-style pandas time series.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.HolidayDetector.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.HolidayDetector.fit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.HolidayDetector.get_new_params">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_new_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'random'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.HolidayDetector.get_new_params" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.HolidayDetector.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_anomalies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">marker_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.HolidayDetector.plot" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.anomaly_detector.HolidayDetector.plot_anomaly">
<span class="sig-name descname"><span class="pre">plot_anomaly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.anomaly_detector.HolidayDetector.plot_anomaly" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</section>
<section id="module-autots.evaluator.auto_model">
<span id="autots-evaluator-auto-model-module"></span><h2>autots.evaluator.auto_model module<a class="headerlink" href="#module-autots.evaluator.auto_model" title="Link to this heading">¶</a></h2>
<p>Mid-level helper functions for AutoTS.</p>
<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.ModelMonster">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">ModelMonster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'infer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">holiday_country</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'US'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startTimeStamps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">14</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2020</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.ModelMonster" title="Link to this definition">¶</a></dt>
<dd><p>Directs strings and parameters to appropriate model objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>str</em>) – Name of Model Function</p></li>
<li><p><strong>parameters</strong> (<em>dict</em>) – Dictionary of parameters to pass through to model</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.ModelPrediction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">ModelPrediction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformation_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_str</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'infer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_negatives</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">holiday_country</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'US'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startTimeStamps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_on_forecast_nan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2020</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_model_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_gc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.ModelPrediction" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="autots.models.html#autots.models.base.ModelObject" title="autots.models.base.ModelObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">ModelObject</span></code></a></p>
<p>Feed parameters into modeling pipeline. A class object, does NOT work with ensembles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_train</strong> (<em>pandas.DataFrame</em>) – numeric training dataset of DatetimeIndex and series as cols</p></li>
<li><p><strong>forecast_length</strong> (<em>int</em>) – number of periods to forecast</p></li>
<li><p><strong>transformation_dict</strong> (<em>dict</em>) – a dictionary of outlier, fillNA, and transformation methods to be used</p></li>
<li><p><strong>model_str</strong> (<em>str</em>) – a string to be direct to the appropriate model, used in ModelMonster</p></li>
<li><p><strong>frequency</strong> (<em>str</em>) – str representing frequency alias of time series</p></li>
<li><p><strong>prediction_interval</strong> (<em>float</em>) – width of errors (note: rarely do the intervals accurately match the % asked for…)</p></li>
<li><p><strong>no_negatives</strong> (<em>bool</em>) – whether to force all forecasts to be &gt; 0</p></li>
<li><p><strong>constraint</strong> (<em>float</em>) – when not None, use this value * data st dev above max or below min for constraining forecast values.</p></li>
<li><p><strong>future_regressor_train</strong> (<em>pd.Series</em>) – with datetime index, of known in advance data, section matching train data</p></li>
<li><p><strong>future_regressor_forecast</strong> (<em>pd.Series</em>) – with datetime index, of known in advance data, section matching test data</p></li>
<li><p><strong>holiday_country</strong> (<em>str</em>) – passed through to holiday package, used by a few models as 0/1 regressor.</p></li>
<li><p><strong>startTimeStamps</strong> (<em>pd.Series</em>) – index (series_ids), columns (Datetime of First start of series)</p></li>
<li><p><strong>fail_on_forecast_nan</strong> (<em>bool</em>) – if False, return forecasts even if NaN present, if True, raises error if any nan in forecast</p></li>
<li><p><strong>return_model</strong> (<em>bool</em>) – if True, forecast will have .model and .tranformer attributes set to model object.</p></li>
<li><p><strong>n_jobs</strong> (<em>int</em>) – number of processes</p></li>
<li><p><strong>current_model_file</strong> (<em>str</em>) – file path to write to disk of current model params (for debugging if computer crashes). .json is appended</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Prediction from AutoTS model object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="autots.models.html#autots.models.base.PredictionObject" title="autots.models.base.PredictionObject">PredictionObject</a> (autots.PredictionObject)</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.ModelPrediction.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.ModelPrediction.fit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.ModelPrediction.fit_data">
<span class="sig-name descname"><span class="pre">fit_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.ModelPrediction.fit_data" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.ModelPrediction.fit_predict">
<span class="sig-name descname"><span class="pre">fit_predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_forecast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.ModelPrediction.fit_predict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.ModelPrediction.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.ModelPrediction.predict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.NewGeneticTemplate">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">NewGeneticTemplate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">submitted_parameters</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Score'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort_ascending</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_per_model_class</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['Model',</span> <span class="pre">'ModelParameters',</span> <span class="pre">'TransformationParameters',</span> <span class="pre">'Ensemble']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformer_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformer_max_depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">score_per_series</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive_count</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.NewGeneticTemplate" title="Link to this definition">¶</a></dt>
<dd><p>Return new template given old template with model accuracies.</p>
<p>“No mating!” - Pattern, Sanderson</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_results</strong> (<em>pandas.DataFrame</em>) – models that have actually been run</p></li>
<li><p><strong>submitted_paramters</strong> (<em>pandas.DataFrame</em>) – models tried (may have returned different parameters to results)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.RandomTemplate">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">RandomTemplate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['ZeroesNaive',</span> <span class="pre">'LastValueNaive',</span> <span class="pre">'AverageValueNaive',</span> <span class="pre">'GLS',</span> <span class="pre">'GLM',</span> <span class="pre">'ETS']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformer_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'fast'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformer_max_depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.RandomTemplate" title="Link to this definition">¶</a></dt>
<dd><p>Returns a template dataframe of randomly generated transformations, models, and hyperparameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n</strong> (<em>int</em>) – number of random models to return</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.TemplateEvalObject">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">TemplateEvalObject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_results=Empty</span> <span class="pre">DataFrame</span> <span class="pre">Columns:</span> <span class="pre">[]</span> <span class="pre">Index:</span> <span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_timestamp_smape=Empty</span> <span class="pre">DataFrame</span> <span class="pre">Columns:</span> <span class="pre">[]</span> <span class="pre">Index:</span> <span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_metrics=Empty</span> <span class="pre">DataFrame</span> <span class="pre">Columns:</span> <span class="pre">[]</span> <span class="pre">Index:</span> <span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_mae=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_rmse=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_made=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_contour=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_spl=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_mle=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_imle=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_maxe=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_oda=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_mqae=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_dwae=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_ewmae=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_uwmse=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_smoothness=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_mate=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_matse=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_wasserstein=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_series_dwd=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_count:</span> <span class="pre">int</span> <span class="pre">=</span> <span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.TemplateEvalObject" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Object to contain all the failures!.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.TemplateEvalObject.full_mae_ids">
<span class="sig-name descname"><span class="pre">full_mae_ids</span></span><a class="headerlink" href="#autots.evaluator.auto_model.TemplateEvalObject.full_mae_ids" title="Link to this definition">¶</a></dt>
<dd><p>list of model_ids corresponding to full_mae_errors</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.TemplateEvalObject.full_mae_errors">
<span class="sig-name descname"><span class="pre">full_mae_errors</span></span><a class="headerlink" href="#autots.evaluator.auto_model.TemplateEvalObject.full_mae_errors" title="Link to this definition">¶</a></dt>
<dd><p>list of numpy arrays of shape (rows, columns) appended in order of validation
only provided for ‘mosaic’ ensembling</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.TemplateEvalObject.concat">
<span class="sig-name descname"><span class="pre">concat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">another_eval</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.TemplateEvalObject.concat" title="Link to this definition">¶</a></dt>
<dd><p>Merge another TemplateEvalObject onto this one.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.TemplateEvalObject.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.TemplateEvalObject.load" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.TemplateEvalObject.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'initial_results.pickle'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.TemplateEvalObject.save" title="Link to this definition">¶</a></dt>
<dd><p>Save results to a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – <a href="#id1"><span class="problematic" id="id2">*</span></a>.pickle or <a href="#id3"><span class="problematic" id="id4">*</span></a>.csv. .pickle saves full results</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.TemplateWizard">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">TemplateWizard</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_train</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_test</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ensemble</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['mosaic',</span> <span class="pre">'distance']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">14</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'infer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_negatives</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_forecast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">holiday_country</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'US'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startTimeStamps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2020</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_round</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_generation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_generations</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'0'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_interrupt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['Model',</span> <span class="pre">'ModelParameters',</span> <span class="pre">'TransformationParameters',</span> <span class="pre">'Ensemble']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">traceback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_model_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mosaic_used</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_gc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.TemplateWizard" title="Link to this definition">¶</a></dt>
<dd><p>Take Template, returns Results.</p>
<p>There are some who call me… Tim. - Python</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>pandas.DataFrame</em>) – containing model str, and json of transformations and hyperparamters</p></li>
<li><p><strong>df_train</strong> (<em>pandas.DataFrame</em>) – numeric training dataset of DatetimeIndex and series as cols</p></li>
<li><p><strong>df_test</strong> (<em>pandas.DataFrame</em>) – dataframe of actual values of (forecast length * n series)</p></li>
<li><p><strong>weights</strong> (<em>dict</em>) – key = column/series_id, value = weight</p></li>
<li><p><strong>ensemble</strong> (<em>list</em>) – list of ensemble types to prepare metric collection</p></li>
<li><p><strong>forecast_length</strong> (<em>int</em>) – number of periods to forecast</p></li>
<li><p><strong>transformation_dict</strong> (<em>dict</em>) – a dictionary of outlier, fillNA, and transformation methods to be used</p></li>
<li><p><strong>model_str</strong> (<em>str</em>) – a string to be direct to the appropriate model, used in ModelMonster</p></li>
<li><p><strong>frequency</strong> (<em>str</em>) – str representing frequency alias of time series</p></li>
<li><p><strong>prediction_interval</strong> (<em>float</em>) – width of errors (note: rarely do the intervals accurately match the % asked for…)</p></li>
<li><p><strong>no_negatives</strong> (<em>bool</em>) – whether to force all forecasts to be &gt; 0</p></li>
<li><p><strong>constraint</strong> (<em>float</em>) – when not None, use this value * data st dev above max or below min for constraining forecast values.</p></li>
<li><p><strong>future_regressor_train</strong> (<em>pd.Series</em>) – with datetime index, of known in advance data, section matching train data</p></li>
<li><p><strong>future_regressor_forecast</strong> (<em>pd.Series</em>) – with datetime index, of known in advance data, section matching test data</p></li>
<li><p><strong>holiday_country</strong> (<em>str</em>) – passed through to holiday package, used by a few models as 0/1 regressor.</p></li>
<li><p><strong>startTimeStamps</strong> (<em>pd.Series</em>) – index (series_ids), columns (Datetime of First start of series)</p></li>
<li><p><strong>validation_round</strong> (<em>int</em>) – int passed to record current validation.</p></li>
<li><p><strong>current_generation</strong> (<em>int</em>) – info to pass to print statements</p></li>
<li><p><strong>max_generations</strong> (<em>str</em>) – info to pass to print statements</p></li>
<li><p><strong>model_interrupt</strong> (<em>bool</em>) – if True, keyboard interrupts are caught and only break current model eval.</p></li>
<li><p><strong>template_cols</strong> (<em>list</em>) – column names of columns used as model template</p></li>
<li><p><strong>traceback</strong> (<em>bool</em>) – include tracebook over just error representation</p></li>
<li><p><strong>current_model_file</strong> (<em>str</em>) – file path to write to disk of current model params (for debugging if computer crashes). .json is appended</p></li>
<li><p><strong>force_gc</strong> (<em>bool</em>) – if True, run gc.collect after every model run</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>TemplateEvalObject</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.UniqueTemplates">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">UniqueTemplates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">existing_templates</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_possibilities</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">selection_cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['Model',</span> <span class="pre">'ModelParameters',</span> <span class="pre">'TransformationParameters',</span> <span class="pre">'Ensemble']</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.UniqueTemplates" title="Link to this definition">¶</a></dt>
<dd><p>Returns unique dataframe rows from new_possiblities not in existing_templates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>selection_cols</strong> (<em>list</em>) – list of column namess to use to judge uniqueness/match on</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.back_forecast">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">back_forecast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_param_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_transform_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_splits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'infer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_negatives</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">holiday_country</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'US'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">123</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_periods</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_model_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_gc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.back_forecast" title="Link to this definition">¶</a></dt>
<dd><p>Create forecasts for the historical training data, ie. backcast or back forecast.</p>
<p>This actually forecasts on historical data, these are not fit model values as are often returned by other packages.
As such, this will be slower, but more representative of real world model performance.
There may be jumps in data between chunks.</p>
<p>Args are same as for model_forecast except…
n_splits(int): how many pieces to split data into. Pass 2 for fastest, or “auto” for best accuracy</p>
<p>Returns a standard prediction object (access .forecast, .lower_forecast, .upper_forecast)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>eval_period</strong> (<em>int</em>) – if passed, only returns results for this many time steps of recent history</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.create_model_id">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">create_model_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_str</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parameter_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformation_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.create_model_id" title="Link to this definition">¶</a></dt>
<dd><p>Create a hash ID which should be unique to the model parameters.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.dict_recombination">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">dict_recombination</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.dict_recombination" title="Link to this definition">¶</a></dt>
<dd><p>Recombine two dictionaries with identical keys. Return new dict.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.generate_score">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">generate_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric_weighting</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_score_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_validations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.generate_score" title="Link to this definition">¶</a></dt>
<dd><p>Generate score based on relative accuracies.</p>
<p>SMAPE - smaller is better
MAE - smaller is better
RMSE -  smaller is better
MADE - smaller is better
MLE - smaller is better
MAGE - smaller is better
SPL - smaller is better
ODA - bigger is better
DWAE - smaller is better
Contour - bigger is better (is 0 to 1)
Containment - bigger is better (is 0 to 1)
Runtime - smaller is better</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.generate_score_per_series">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">generate_score_per_series</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">results_object</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric_weighting</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total_validations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models_to_use</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.generate_score_per_series" title="Link to this definition">¶</a></dt>
<dd><p>Score generation on per_series_metrics for ensembles.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.horizontal_template_to_model_list">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">horizontal_template_to_model_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.horizontal_template_to_model_list" title="Link to this definition">¶</a></dt>
<dd><p>helper function to take template dataframe of ensembles to a single list of models.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.model_forecast">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">model_forecast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_param_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_transform_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_train</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'infer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_negatives</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_forecast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">holiday_country</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'US'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startTimeStamps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_on_forecast_nan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2020</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['Model',</span> <span class="pre">'ModelParameters',</span> <span class="pre">'TransformationParameters',</span> <span class="pre">'Ensemble']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizontal_subset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_model_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_gc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">internal_validation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.model_forecast" title="Link to this definition">¶</a></dt>
<dd><p>Takes numeric data, returns numeric forecasts.</p>
<p>Only one model (albeit potentially an ensemble)!
Horizontal ensembles can not be nested, other ensemble types can be.</p>
<p>Well, she turned me into a newt.
A newt?
I got better. -Python</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_name</strong> (<em>str</em>) – a string to be direct to the appropriate model, used in ModelMonster</p></li>
<li><p><strong>model_param_dict</strong> (<em>dict</em>) – dictionary of parameters to be passed into the model.</p></li>
<li><p><strong>model_transform_dict</strong> (<em>dict</em>) – a dictionary of fillNA and transformation methods to be used
pass an empty dictionary if no transformations are desired.</p></li>
<li><p><strong>df_train</strong> (<em>pandas.DataFrame</em>) – numeric training dataset of DatetimeIndex and series as cols</p></li>
<li><p><strong>forecast_length</strong> (<em>int</em>) – number of periods to forecast</p></li>
<li><p><strong>frequency</strong> (<em>str</em>) – str representing frequency alias of time series</p></li>
<li><p><strong>prediction_interval</strong> (<em>float</em>) – width of errors (note: rarely do the intervals accurately match the % asked for…)</p></li>
<li><p><strong>no_negatives</strong> (<em>bool</em>) – whether to force all forecasts to be &gt; 0</p></li>
<li><p><strong>constraint</strong> (<em>float</em>) – when not None, use this value * data st dev above max or below min for constraining forecast values.</p></li>
<li><p><strong>future_regressor_train</strong> (<em>pd.Series</em>) – with datetime index, of known in advance data, section matching train data</p></li>
<li><p><strong>future_regressor_forecast</strong> (<em>pd.Series</em>) – with datetime index, of known in advance data, section matching test data</p></li>
<li><p><strong>holiday_country</strong> (<em>str</em>) – passed through to holiday package, used by a few models as 0/1 regressor.</p></li>
<li><p><strong>n_jobs</strong> (<em>int</em>) – number of CPUs to use when available.</p></li>
<li><p><strong>template_cols</strong> (<em>list</em>) – column names of columns used as model template</p></li>
<li><p><strong>horizontal_subset</strong> (<em>list</em>) – columns of df_train to use for forecast, meant for internal use for horizontal ensembling</p></li>
<li><p><strong>fail_on_forecast_nan</strong> (<em>bool</em>) – if False, return forecasts even if NaN present, if True, raises error if any nan in forecast. True is recommended.</p></li>
<li><p><strong>return_model</strong> (<em>bool</em>) – if True, forecast will have .model and .tranformer attributes set to model object. Only works for non-ensembles.</p></li>
<li><p><strong>current_model_file</strong> (<em>str</em>) – file path to write to disk of current model params (for debugging if computer crashes). .json is appended</p></li>
<li><p><strong>force_gc</strong> (<em>bool</em>) – if True, run gc.collect() after each model</p></li>
<li><p><strong>internal_validation</strong> – niche flag to tell that it is running inside a template model search</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Prediction from AutoTS model object</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="autots.models.html#autots.models.base.PredictionObject" title="autots.models.base.PredictionObject">PredictionObject</a> (autots.PredictionObject)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.random_model">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">random_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_prob</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformer_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fast'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformer_max_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'random'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_models</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keyword_format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.random_model" title="Link to this definition">¶</a></dt>
<dd><p>Generate a random model from a given list of models and probabilities.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.remove_leading_zeros">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">remove_leading_zeros</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.remove_leading_zeros" title="Link to this definition">¶</a></dt>
<dd><p>Accepts wide dataframe, returns dataframe with zeroes preceeding any non-zero value as NaN.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.trans_dict_recomb">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">trans_dict_recomb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dict_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.trans_dict_recomb" title="Link to this definition">¶</a></dt>
<dd><p>Recombine two transformation param dictionaries from array of dicts.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.unpack_ensemble_models">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">unpack_ensemble_models</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_cols</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['Model',</span> <span class="pre">'ModelParameters',</span> <span class="pre">'TransformationParameters',</span> <span class="pre">'Ensemble']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_ensemble</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recursive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.unpack_ensemble_models" title="Link to this definition">¶</a></dt>
<dd><p>Take ensemble models from template and add as new rows.
Some confusion may exist as Ensembles require both ‘Ensemble’ column &gt; 0 and model name ‘Ensemble’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>pd.DataFrame</em>) – AutoTS template containing template_cols</p></li>
<li><p><strong>keep_ensemble</strong> (<em>bool</em>) – if False, drop row containing original ensemble</p></li>
<li><p><strong>recursive</strong> (<em>bool</em>) – if True, unnest ensembles of ensembles…</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_model.validation_aggregation">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_model.</span></span><span class="sig-name descname"><span class="pre">validation_aggregation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validation_results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groupby_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['ID',</span> <span class="pre">'Model',</span> <span class="pre">'ModelParameters',</span> <span class="pre">'TransformationParameters',</span> <span class="pre">'Ensemble']</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_model.validation_aggregation" title="Link to this definition">¶</a></dt>
<dd><p>Aggregate a TemplateEvalObject.</p>
</dd></dl>

</section>
<section id="module-autots.evaluator.auto_ts">
<span id="autots-evaluator-auto-ts-module"></span><h2>autots.evaluator.auto_ts module<a class="headerlink" href="#module-autots.evaluator.auto_ts" title="Link to this heading">¶</a></h2>
<p>Higher-level functions of automated time series modeling.</p>
<dl class="py class">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_ts.</span></span><span class="sig-name descname"><span class="pre">AutoTS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">14</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'infer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_generations</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">no_negatives</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">constraint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ensemble</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'General+Random'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2022</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">holiday_country</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'US'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggfunc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'first'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">na_tolerance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metric_weighting</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{'containment_weighting':</span> <span class="pre">0,</span> <span class="pre">'contour_weighting':</span> <span class="pre">0.01,</span> <span class="pre">'imle_weighting':</span> <span class="pre">0,</span> <span class="pre">'made_weighting':</span> <span class="pre">0.05,</span> <span class="pre">'mae_weighting':</span> <span class="pre">2,</span> <span class="pre">'mage_weighting':</span> <span class="pre">0,</span> <span class="pre">'mle_weighting':</span> <span class="pre">0,</span> <span class="pre">'oda_weighting':</span> <span class="pre">0.001,</span> <span class="pre">'rmse_weighting':</span> <span class="pre">2,</span> <span class="pre">'runtime_weighting':</span> <span class="pre">0.01,</span> <span class="pre">'smape_weighting':</span> <span class="pre">5,</span> <span class="pre">'spl_weighting':</span> <span class="pre">3,</span> <span class="pre">'wasserstein_weighting':</span> <span class="pre">0.01}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_most_recent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_data_older_than_periods</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'scalable'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformer_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformer_max_depth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'random'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_validations</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models_to_validate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_per_model_class</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'backwards'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_allowed_train_percent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">remove_leading_zeroes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefill_na</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">introduce_na</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preclean</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_interrupt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">generation_timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_model_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_gc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizontal_ensemble_validation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_metric</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ndarray</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Automate time series modeling using a genetic algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>forecast_length</strong> (<em>int</em>) – number of periods over which to evaluate forecast. Can be overriden later in .predict().
when you don’t have much historical data, using a small forecast length for .fit and the full desired forecast lenght for .predict is usually the best possible approach given limitations.</p></li>
<li><p><strong>frequency</strong> (<em>str</em>) – ‘infer’ or a specific pandas datetime offset. Can be used to force rollup of data (ie daily input, but frequency ‘M’ will rollup to monthly).</p></li>
<li><p><strong>prediction_interval</strong> (<em>float</em>) – 0-1, uncertainty range for upper and lower forecasts. Adjust range, but rarely matches actual containment.</p></li>
<li><p><strong>max_generations</strong> (<em>int</em>) – number of genetic algorithms generations to run.
More runs = longer runtime, generally better accuracy.
It’s called <cite>max</cite> because someday there will be an auto early stopping option, but for now this is just the exact number of generations to run.</p></li>
<li><p><strong>no_negatives</strong> (<em>bool</em>) – if True, all negative predictions are rounded up to 0.</p></li>
<li><p><strong>constraint</strong> (<em>float</em>) – <p>when not None, use this float value * data st dev above max or below min for constraining forecast values.
now also instead accepts a dictionary containing the following key/values:</p>
<blockquote>
<div><dl class="simple">
<dt>constraint_method (str): one of</dt><dd><p>stdev_min - threshold is min and max of historic data +/- constraint * st dev of data
stdev - threshold is the mean of historic data +/- constraint * st dev of data
absolute - input is array of length series containing the threshold’s final value for each
quantile - constraint is the quantile of historic data to use as threshold</p>
</dd>
<dt>constraint_regularization (float): 0 to 1</dt><dd><p>where 0 means no constraint, 1 is hard threshold cutoff, and in between is penalty term</p>
</dd>
</dl>
<p>upper_constraint (float): or array, depending on method, None if unused
lower_constraint (float): or array, depending on method, None if unused
bounds (bool): if True, apply to upper/lower forecast, otherwise False applies only to forecast</p>
</div></blockquote>
</p></li>
<li><p><strong>ensemble</strong> (<em>str</em>) – None or list or comma-separated string containing:
‘auto’, ‘simple’, ‘distance’, ‘horizontal’, ‘horizontal-min’, ‘horizontal-max’, “mosaic”, “subsample”</p></li>
<li><p><strong>initial_template</strong> (<em>str</em>) – ‘Random’ - randomly generates starting template, ‘General’ uses template included in package, ‘General+Random’ - both of previous. Also can be overriden with self.import_template()</p></li>
<li><p><strong>random_seed</strong> (<em>int</em>) – random seed allows (slightly) more consistent results.</p></li>
<li><p><strong>holiday_country</strong> (<em>str</em>) – passed through to Holidays package for some models.</p></li>
<li><p><strong>subset</strong> (<em>int</em>) – maximum number of series to evaluate at once. Useful to speed evaluation when many series are input.
takes a new subset of columns on each validation, unless mosaic ensembling, in which case columns are the same in each validation</p></li>
<li><p><strong>aggfunc</strong> (<em>str</em>) – if data is to be rolled up to a higher frequency (daily -&gt; monthly) or duplicate timestamps are included. Default ‘first’ removes duplicates, for rollup try ‘mean’ or np.sum.
Beware numeric aggregations like ‘mean’ will not work with non-numeric inputs.
Numeric aggregations like ‘sum’ will also change nan values to 0</p></li>
<li><p><strong>na_tolerance</strong> (<em>float</em>) – 0 to 1. Series are dropped if they have more than this percent NaN. 0.95 here would allow series containing up to 95% NaN values.</p></li>
<li><p><strong>metric_weighting</strong> (<em>dict</em>) – weights to assign to metrics, effecting how the ranking score is generated.</p></li>
<li><p><strong>drop_most_recent</strong> (<em>int</em>) – option to drop n most recent data points. Useful, say, for monthly sales data where the current (unfinished) month is included.
occurs after any aggregration is applied, so will be whatever is specified by frequency, will drop n frequencies</p></li>
<li><p><strong>drop_data_older_than_periods</strong> (<em>int</em>) – take only the n most recent timestamps</p></li>
<li><p><strong>model_list</strong> (<em>list</em>) – str alias or list of names of model objects to use
now can be a dictionary of {“model”: prob} but only affects starting random templates. Genetic algorithim takes from there.</p></li>
<li><p><strong>transformer_list</strong> (<em>list</em>) – list of transformers to use, or dict of transformer:probability. Note this does not apply to initial templates.
can accept string aliases: “all”, “fast”, “superfast”, ‘scalable’ (scalable is a subset of fast that should have fewer memory issues at scale)</p></li>
<li><p><strong>transformer_max_depth</strong> (<em>int</em>) – maximum number of sequential transformers to generate for new Random Transformers. Fewer will be faster.</p></li>
<li><p><strong>models_mode</strong> (<em>str</em>) – option to adjust parameter options for newly generated models. Only sporadically utilized. Currently includes:
‘default’/’random’, ‘deep’ (searches more params, likely slower), and ‘regressor’ (forces ‘User’ regressor mode in regressor capable models),
‘gradient_boosting’, ‘neuralnets’ (~Regression class models only)</p></li>
<li><p><strong>num_validations</strong> (<em>int</em>) – number of cross validations to perform. 0 for just train/test on best split.
Possible confusion: num_validations is the number of validations to perform <em>after</em> the first eval segment, so totally eval/validations will be this + 1.
Also “auto” and “max” aliases available. Max maxes out at 50.</p></li>
<li><p><strong>models_to_validate</strong> (<em>int</em>) – top n models to pass through to cross validation. Or float in 0 to 1 as % of tried.
0.99 is forced to 100% validation. 1 evaluates just 1 model.
If horizontal or mosaic ensemble, then additional min per_series models above the number here are added to validation.</p></li>
<li><p><strong>max_per_model_class</strong> (<em>int</em>) – of the models_to_validate what is the maximum to pass from any one model class/family.</p></li>
<li><p><strong>validation_method</strong> (<em>str</em>) – ‘even’, ‘backwards’, or ‘seasonal n’ where n is an integer of seasonal
‘backwards’ is better for recency and for shorter training sets
‘even’ splits the data into equally-sized slices best for more consistent data, a poetic but less effective strategy than others here
‘seasonal’ most similar indexes
‘seasonal n’ for example ‘seasonal 364’ would test all data on each previous year of the forecast_length that would immediately follow the training data.
‘similarity’ automatically finds the data sections most similar to the most recent data that will be used for prediction
‘custom’ - if used, .fit() needs validation_indexes passed - a list of pd.DatetimeIndex’s, tail of each is used as test</p></li>
<li><p><strong>min_allowed_train_percent</strong> (<em>float</em>) – percent of forecast length to allow as min training, else raises error.
0.5 with a forecast length of 10 would mean 5 training points are mandated, for a total of 15 points.
Useful in (unrecommended) cases where forecast_length &gt; training length.</p></li>
<li><p><strong>remove_leading_zeroes</strong> (<em>bool</em>) – replace leading zeroes with NaN. Useful in data where initial zeroes mean data collection hasn’t started yet.</p></li>
<li><p><strong>prefill_na</strong> (<em>str</em>) – value to input to fill all NaNs with. Leaving as None and allowing model interpolation is recommended.
None, 0, ‘mean’, or ‘median’. 0 may be useful in for examples sales cases where all NaN can be assumed equal to zero.</p></li>
<li><p><strong>introduce_na</strong> (<em>bool</em>) – whether to force last values in one training validation to be NaN. Helps make more robust models.
defaults to None, which introduces NaN in last rows of validations if any NaN in tail of training data. Will not introduce NaN to all series if subset is used.
if True, will also randomly change 20% of all rows to NaN in the validations</p></li>
<li><p><strong>preclean</strong> (<em>dict</em>) – if not None, a dictionary of Transformer params to be applied to input data
{“fillna”: “median”, “transformations”: {}, “transformation_params”: {}}
This will change data used in model inputs for fit and predict, and for accuracy evaluation in cross validation!</p></li>
<li><p><strong>model_interrupt</strong> (<em>bool</em>) – if False, KeyboardInterrupts quit entire program.
if True, KeyboardInterrupts attempt to only quit current model.
if True, recommend use in conjunction with <cite>verbose</cite> &gt; 0 and <cite>result_file</cite> in the event of accidental complete termination.
if “end_generation”, as True and also ends entire generation of run. Note skipped models will not be tried again.</p></li>
<li><p><strong>generation_timeout</strong> (<em>int</em>) – if not None, this is the number of minutes from start at which the generational search ends, then proceeding to validation
This is only checked after the end of each generation, so only offers an ‘approximate’ timeout for searching. It is an overall cap for total generation search time, not per generation.</p></li>
<li><p><strong>current_model_file</strong> (<em>str</em>) – file path to write to disk of current model params (for debugging if computer crashes). .json is appended</p></li>
<li><p><strong>force_gc</strong> (<em>bool</em>) – if True, run gc.collect() after each model run. Probably won’t make much difference.</p></li>
<li><p><strong>horizontal_ensemble_validation</strong> (<em>bool</em>) – True is slower but more reliable model selection on unstable data, if horz. ensembles are used</p></li>
<li><p><strong>metric</strong> (<em>custom</em>) – a function to generate a custom metric. Expects func(A, F, df_train, prediction_interval) where the first three are np arrays of wide style 2d.</p></li>
<li><p><strong>verbose</strong> (<em>int</em>) – setting to 0 or lower should reduce most output. Higher numbers give more output.</p></li>
<li><p><strong>n_jobs</strong> (<em>int</em>) – Number of cores available to pass to parallel processing. A joblib context manager can be used instead (pass None in this case). Also ‘auto’.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.best_model">
<span class="sig-name descname"><span class="pre">best_model</span></span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.best_model" title="Link to this definition">¶</a></dt>
<dd><p>DataFrame containing template for the best ranked model</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.best_model_name">
<span class="sig-name descname"><span class="pre">best_model_name</span></span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.best_model_name" title="Link to this definition">¶</a></dt>
<dd><p>model name</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.best_model_params">
<span class="sig-name descname"><span class="pre">best_model_params</span></span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.best_model_params" title="Link to this definition">¶</a></dt>
<dd><p>model params</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.best_model_transformation_params">
<span class="sig-name descname"><span class="pre">best_model_transformation_params</span></span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.best_model_transformation_params" title="Link to this definition">¶</a></dt>
<dd><p>transformation parameters</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.best_model_ensemble">
<span class="sig-name descname"><span class="pre">best_model_ensemble</span></span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.best_model_ensemble" title="Link to this definition">¶</a></dt>
<dd><p>Ensemble type int id</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.regression_check">
<span class="sig-name descname"><span class="pre">regression_check</span></span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.regression_check" title="Link to this definition">¶</a></dt>
<dd><p>If True, the best_model uses an input ‘User’ future_regressor</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.df_wide_numeric">
<span class="sig-name descname"><span class="pre">df_wide_numeric</span></span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.df_wide_numeric" title="Link to this definition">¶</a></dt>
<dd><p>dataframe containing shaped final data, will include preclean</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.initial_results.model_results">
<span class="sig-prename descclassname"><span class="pre">initial_results.</span></span><span class="sig-name descname"><span class="pre">model_results</span></span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.initial_results.model_results" title="Link to this definition">¶</a></dt>
<dd><p>contains a collection of result metrics</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>object</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.score_per_series">
<span class="sig-name descname"><span class="pre">score_per_series</span></span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.score_per_series" title="Link to this definition">¶</a></dt>
<dd><p>generated score of metrics given per input series, if horizontal ensembles</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">fit,</span> <span class="pre">predict,</span> <span class="pre">get_new_params</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">export_template,</span> <span class="pre">import_template,</span> <span class="pre">import_results,</span> <span class="pre">import_best_model</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">results,</span> <span class="pre">failure_rate</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">horizontal_to_df,</span> <span class="pre">mosaic_to_df</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">plot_horizontal,</span> <span class="pre">plot_horizontal_transformers,</span> <span class="pre">plot_generation_loss,</span> <span class="pre">plot_backforecast</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.back_forecast">
<span class="sig-name descname"><span class="pre">back_forecast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_splits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tail</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.back_forecast" title="Link to this definition">¶</a></dt>
<dd><p>Create forecasts for the historical training data, ie. backcast or back forecast. OUT OF SAMPLE</p>
<p>This actually forecasts on historical data, these are not fit model values as are often returned by other packages.
As such, this will be slower, but more representative of real world model performance.
There may be jumps in data between chunks.</p>
<p>Args are same as for model_forecast except…
n_splits(int): how many pieces to split data into. Pass 2 for fastest, or “auto” for best accuracy
series (str): if to run on only one column, pass column name. Faster than full.
tail (int): df.tail() of the dataset, back_forecast is only run on n most recent observations.</p>
<blockquote>
<div><p>which points at eval_periods of lower-level back_forecast function</p>
</div></blockquote>
<p>Returns a standard prediction object (access .forecast, .lower_forecast, .upper_forecast)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.best_model_per_series_mape">
<span class="sig-name descname"><span class="pre">best_model_per_series_mape</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.best_model_per_series_mape" title="Link to this definition">¶</a></dt>
<dd><p>This isn’t quite classic mape but is a percentage mean error intended for quick visuals not final statistics (see model.results()).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.best_model_per_series_score">
<span class="sig-name descname"><span class="pre">best_model_per_series_score</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.best_model_per_series_score" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.create_unpredictability_score">
<span class="sig-name descname"><span class="pre">create_unpredictability_score</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_wide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.create_unpredictability_score" title="Link to this definition">¶</a></dt>
<dd><p>Create a dataframe per validation index of relative unpredictability. Most representative on longer model searches.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.diagnose_params">
<span class="sig-name descname"><span class="pre">diagnose_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'runtime'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waterfall_plots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.diagnose_params" title="Link to this definition">¶</a></dt>
<dd><p>Attempt to explain params causing measured outcomes using shap and linear regression coefficients.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> (<em>str</em>) – runtime, smape, mae, oda, or exception, the measured outcome to correlate parameters with</p></li>
<li><p><strong>waterfall_plots</strong> (<em>bool</em>) – whether to show waterfall SHAP plots</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.expand_horizontal">
<span class="sig-name descname"><span class="pre">expand_horizontal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">force</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.expand_horizontal" title="Link to this definition">¶</a></dt>
<dd><p>Enables expanding horizontal models trained on a subset to full data.
Reruns template models and generates new template. Requires a horizontal model set as best model.</p>
<p>see best_model_original and best_model_original_id for reference back to original best model after this runs</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>force</strong> (<em>bool</em>) – if True, runs expansions whether subset or not. Necessary on imported template without .fit() as subset flag is set in fit</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.export_best_model">
<span class="sig-name descname"><span class="pre">export_best_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.export_best_model" title="Link to this definition">¶</a></dt>
<dd><p>Basically the same as export_template but only ever the one best model.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.export_template">
<span class="sig-name descname"><span class="pre">export_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'best'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_per_model_class</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_results</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unpack_ensembles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_metrics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">['smape',</span> <span class="pre">'spl',</span> <span class="pre">'wasserstein',</span> <span class="pre">'mle',</span> <span class="pre">'imle',</span> <span class="pre">'ewmae']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_metrics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">focus_models</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.export_template" title="Link to this definition">¶</a></dt>
<dd><p>Export top results as a reusable template.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – ‘csv’ or ‘json’ (in filename).
<cite>None</cite> to return a dataframe and not write a file.</p></li>
<li><p><strong>models</strong> (<em>str</em>) – ‘best’ or ‘all’, and ‘slowest’ for diagnostics</p></li>
<li><p><strong>n</strong> (<em>int</em>) – if models = ‘best’, how many n-best to export</p></li>
<li><p><strong>max_per_model_class</strong> (<em>int</em>) – if models = ‘best’,
the max number of each model class to include in template</p></li>
<li><p><strong>include_results</strong> (<em>bool</em>) – whether to include performance metrics</p></li>
<li><p><strong>unpack_ensembles</strong> (<em>bool</em>) – if True, ensembles are returned only as components (will result in larger n models, as full ensemble counts as 1 model)</p></li>
<li><p><strong>min_metrics</strong> (<em>list</em>) – if not None and models==’best’, include the lowest for this metric, a way to include even if not a major part of metric weighting as an addon</p></li>
<li><p><strong>max_metrics</strong> (<em>list</em>) – for metrics to take the max model for</p></li>
<li><p><strong>focus_models</strong> (<em>list</em>) – also pull the best score/min/max metrics as per just this model</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.failure_rate">
<span class="sig-name descname"><span class="pre">failure_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result_set</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'initial'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.failure_rate" title="Link to this definition">¶</a></dt>
<dd><p>Return fraction of models passing with exceptions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result_set</strong> (<em>str</em><em>, </em><em>optional</em>) – ‘validation’ or ‘initial’. Defaults to ‘initial’.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>float.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_ids</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_indexes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.fit" title="Link to this definition">¶</a></dt>
<dd><p>Train algorithm given data supplied.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Datetime Indexed dataframe of series, or dataframe of three columns as below.</p></li>
<li><p><strong>date_col</strong> (<em>str</em>) – name of datetime column if long style data</p></li>
<li><p><strong>value_col</strong> (<em>str</em>) – name of column containing the data of series if using long style data. NOT for pointing out the most important column if several, that’s <cite>weights</cite></p></li>
<li><p><strong>id_col</strong> (<em>str</em>) – name of column identifying different series if long style data.</p></li>
<li><p><strong>future_regressor</strong> (<em>numpy.Array</em>) – single external regressor matching train.index</p></li>
<li><p><strong>weights</strong> (<em>dict</em>) – {‘colname1’: 2, ‘colname2’: 5} - increase importance of a series in metric evaluation. Any left blank assumed to have weight of 1.
pass the alias ‘mean’ as a str ie <cite>weights=’mean’</cite> to automatically use the mean value of a series as its weight
available aliases: mean, median, min, max</p></li>
<li><p><strong>result_file</strong> (<em>str</em>) – results saved on each new generation. Does not include validation rounds.
“.csv” save model results table.
“.pickle” saves full object, including ensemble information.</p></li>
<li><p><strong>grouping_ids</strong> (<em>dict</em>) – currently a one-level dict containing series_id:group_id mapping.
used in 0.2.x but not 0.3.x+ versions. retained for potential future use</p></li>
<li><p><strong>validation_indexes</strong> (<em>list</em>) – list of datetime indexes, tail of forecast length is used as holdout</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.fit_data">
<span class="sig-name descname"><span class="pre">fit_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.fit_data" title="Link to this definition">¶</a></dt>
<dd><p>Part of the setup that involves fitting the initial data but not running any models.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.get_metric_corr">
<span class="sig-name descname"><span class="pre">get_metric_corr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">percent_best</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.get_metric_corr" title="Link to this definition">¶</a></dt>
<dd><p>Returns a dataframe of correlation among evaluation metrics across evaluations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>percent_best</strong> (<em>float</em>) – percent (ie 0.1 for 10%) of models to use, best by score first</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.get_new_params">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_new_params</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'random'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.get_new_params" title="Link to this definition">¶</a></dt>
<dd><p>Randomly generate new parameters for the class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.get_params_from_id">
<span class="sig-name descname"><span class="pre">get_params_from_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.get_params_from_id" title="Link to this definition">¶</a></dt>
<dd><p>Model id must be one that was run in the fit or imported results.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.get_top_n_counts">
<span class="sig-name descname"><span class="pre">get_top_n_counts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.get_top_n_counts" title="Link to this definition">¶</a></dt>
<dd><p>Get the top n most common value counts using a basic dictionary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.horizontal_per_generation">
<span class="sig-name descname"><span class="pre">horizontal_per_generation</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.horizontal_per_generation" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.horizontal_to_df">
<span class="sig-name descname"><span class="pre">horizontal_to_df</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.horizontal_to_df" title="Link to this definition">¶</a></dt>
<dd><p>helper function for plotting.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.import_best_model">
<span class="sig-name descname"><span class="pre">import_best_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">import_target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enforce_model_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_ensemble</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.import_best_model" title="Link to this definition">¶</a></dt>
<dd><p>Load a best model, overriding any existing setting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>import_target</strong> – pd.DataFrame or file path</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.import_results">
<span class="sig-name descname"><span class="pre">import_results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.import_results" title="Link to this definition">¶</a></dt>
<dd><p>Add results from another run on the same data.</p>
<p>Input can be filename with .csv or .pickle.
or can be a DataFrame of model results or a full TemplateEvalObject</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.import_template">
<span class="sig-name descname"><span class="pre">import_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'add_on'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enforce_model_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_ensemble</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_horizontal</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_validation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.import_template" title="Link to this definition">¶</a></dt>
<dd><p>Import a previously exported template of model parameters.
Must be done before the AutoTS object is .fit().</p>
<p>Use import_best_model instead for loading a model for immediate prediction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – file location (or a pd.DataFrame already loaded)</p></li>
<li><p><strong>method</strong> (<em>str</em>) – ‘add_on’ or ‘only’ - “add_on” keeps <cite>initial_template</cite> generated in init. “only” uses only this template.</p></li>
<li><p><strong>enforce_model_list</strong> (<em>bool</em>) – if True, remove model types not in model_list</p></li>
<li><p><strong>include_ensemble</strong> (<em>bool</em>) – if enforce_model_list is True, this specifies whether to allow ensembles anyway (otherwise they are unpacked and parts kept)</p></li>
<li><p><strong>include_horizontal</strong> (<em>bool</em>) – if enforce_model_list is True, this specifies whether to allow ensembles except horizontal (overridden by keep_ensemble)</p></li>
<li><p><strong>force_validation</strong> (<em>bool</em>) – if True, all models imported here will automatically get sent to full cross validation (regardless of first eval performance)
weird behavior can occur wtih force_validation if another template is added later with method==’only’. In that case, model.validate_import should be erased by setting to None</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.list_failed_model_types">
<span class="sig-name descname"><span class="pre">list_failed_model_types</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.list_failed_model_types" title="Link to this definition">¶</a></dt>
<dd><p>Return a list of model types (ie ETS, LastValueNaive) that failed.
If all had at least one success, then return an empty list.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.load_template">
<span class="sig-name descname"><span class="pre">load_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.load_template" title="Link to this definition">¶</a></dt>
<dd><p>Helper funciton for just loading the file part of import_template.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.mosaic_to_df">
<span class="sig-name descname"><span class="pre">mosaic_to_df</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.mosaic_to_df" title="Link to this definition">¶</a></dt>
<dd><p>Helper function to create a readable df of models in mosaic.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.parse_best_model">
<span class="sig-name descname"><span class="pre">parse_best_model</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.parse_best_model" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_back_forecast">
<span class="sig-name descname"><span class="pre">plot_back_forecast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_back_forecast" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_backforecast">
<span class="sig-name descname"><span class="pre">plot_backforecast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_splits</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">facecolor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'black'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'upper</span> <span class="pre">left'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_backforecast" title="Link to this definition">¶</a></dt>
<dd><p>Plot the historical data and fit forecast on historic. Out of sample in chunks = forecast_length by default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> (<em>str</em><em> or </em><em>list</em>) – column names of time series</p></li>
<li><p><strong>n_splits</strong> (<em>int</em><em> or </em><em>str</em>) – “auto”, number &gt; 2, higher more accurate but slower</p></li>
<li><p><strong>start_date</strong> (<em>datetime.datetime</em>) – or “auto”</p></li>
<li><p><strong>title</strong> (<em>str</em>) – </p></li>
<li><p><strong>pd.DataFrame.plot</strong><strong>(</strong><strong>)</strong> (<em>**kwargs passed to</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_chosen_transformer">
<span class="sig-name descname"><span class="pre">plot_chosen_transformer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_wide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chosen_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'grey'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'darkorange'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_chosen_transformer" title="Link to this definition">¶</a></dt>
<dd><p>visualizes the best model transformer, fit_transform (not inverse) effects.
Won’t show much for ensembles, only shows overall transformer if present.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_wide</strong> (<em>pd.DataFrame</em>) – optional, useful if preclean used</p></li>
<li><p><strong>series</strong> (<em>str</em>) – name of time series to plot</p></li>
<li><p><strong>chosen_params</strong> (<em>dict</em>) – the parameters of the transformer to use, defaults to best of model search</p></li>
<li><p><strong>color1</strong> (<em>str</em>) – color of original</p></li>
<li><p><strong>color2</strong> (<em>str</em>) – color of transformed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_failure_rate">
<span class="sig-name descname"><span class="pre">plot_failure_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'transformers'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_failure_rate" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_generation_loss">
<span class="sig-name descname"><span class="pre">plot_generation_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Single</span> <span class="pre">Model</span> <span class="pre">Accuracy</span> <span class="pre">Gain</span> <span class="pre">Over</span> <span class="pre">Generations'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_generation_loss" title="Link to this definition">¶</a></dt>
<dd><p>Plot improvement in accuracy over generations.
Note: this is only “one size fits all” accuracy and
doesn’t account for the benefits seen for ensembling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>pd.DataFrame.plot</strong><strong>(</strong><strong>)</strong> (<em>**kwargs passed to</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_horizontal">
<span class="sig-name descname"><span class="pre">plot_horizontal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Model</span> <span class="pre">Types</span> <span class="pre">Chosen</span> <span class="pre">by</span> <span class="pre">Series'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_horizontal" title="Link to this definition">¶</a></dt>
<dd><p>Simple plot to visualize assigned series: models.</p>
<p>Note that for ‘mosaic’ ensembles, it only plots the type of the most common model_id for that series, or the first if all are mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_series</strong> (<em>int</em>) – max number of points to plot</p></li>
<li><p><strong>pandas.plot</strong><strong>(</strong><strong>)</strong> (<em>**kwargs passed to</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_horizontal_model_count">
<span class="sig-name descname"><span class="pre">plot_horizontal_model_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">color_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Most</span> <span class="pre">Frequently</span> <span class="pre">Chosen</span> <span class="pre">Models'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_horizontal_model_count" title="Link to this definition">¶</a></dt>
<dd><p>Plots most common models. Does not factor in nested in non-horizontal Ensembles.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_horizontal_per_generation">
<span class="sig-name descname"><span class="pre">plot_horizontal_per_generation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Horizontal</span> <span class="pre">Ensemble</span> <span class="pre">Accuracy</span> <span class="pre">Gain</span> <span class="pre">(first</span> <span class="pre">eval</span> <span class="pre">sample</span> <span class="pre">only)'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_horizontal_per_generation" title="Link to this definition">¶</a></dt>
<dd><p>Plot how well the horizontal ensembles would do after each new generation. Slow.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_horizontal_transformers">
<span class="sig-name descname"><span class="pre">plot_horizontal_transformers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'transformers'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_horizontal_transformers" title="Link to this definition">¶</a></dt>
<dd><p>Simple plot to visualize transformers used.
Note this doesn’t capture transformers nested in simple ensembles.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> (<em>str</em>) – ‘fillna’ or ‘transformers’ - which to plot</p></li>
<li><p><strong>&quot;roman&quot;.</strong> (<em>color_list = list</em><em> of </em><em>colors to sample for bar colors. Can be names</em><em> or </em><em>hex. Or</em>) – </p></li>
<li><p><strong>pandas.plot</strong><strong>(</strong><strong>)</strong> (<em>**kwargs passed to</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_metric_corr">
<span class="sig-name descname"><span class="pre">plot_metric_corr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percent_best</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_metric_corr" title="Link to this definition">¶</a></dt>
<dd><p>Plot correlation in results among metrics.
The metrics that are highly correlated are those that mostly the unscaled ones</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cols</strong> (<em>list</em>) – strings of columns to show, ‘all’ for all</p></li>
<li><p><strong>percent_best</strong> (<em>float</em>) – percent (ie 0.1 for 10%) of models to use, best by score first</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_model_failure_rate">
<span class="sig-name descname"><span class="pre">plot_model_failure_rate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_model_failure_rate" title="Link to this definition">¶</a></dt>
<dd><p>Failure Rate per Transformer type (ignoring ensembles), failure may be due to other model or transformer.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_mosaic">
<span class="sig-name descname"><span class="pre">plot_mosaic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">60</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_rows</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_mosaic" title="Link to this definition">¶</a></dt>
<dd><p>Show the mosaic in a mosaic ensemble, if used.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_per_series_error">
<span class="sig-name descname"><span class="pre">plot_per_series_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'Top</span> <span class="pre">Series</span> <span class="pre">Contributing</span> <span class="pre">Score</span> <span class="pre">Error'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_name_chars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'#ff9912'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(12,</span> <span class="pre">4)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'bar'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_clip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_per_series_error" title="Link to this definition">¶</a></dt>
<dd><p>Plot which series are contributing most to error (Score) of final model. Avg of validations for best_model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em>) – plot title</p></li>
<li><p><strong>max_series</strong> (<em>int</em>) – max number of series to show on plot (sorted)</p></li>
<li><p><strong>max_name_chars</strong> (<em>str</em>) – if horizontal ensemble, will chop series names to this</p></li>
<li><p><strong>color</strong> (<em>str</em>) – hex or name of color of plot</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em>) – passed through to plot axis</p></li>
<li><p><strong>kind</strong> (<em>str</em>) – bar or pie</p></li>
<li><p><strong>upper_clip</strong> (<em>float</em>) – set max error show to this value, to prevent unnecessary distortion</p></li>
<li><p><strong>pandas.plot</strong><strong>(</strong><strong>)</strong> (<em>**kwargs passed to</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_per_series_mape">
<span class="sig-name descname"><span class="pre">plot_per_series_mape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_name_chars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'#ff9912'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(12,</span> <span class="pre">4)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'bar'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_per_series_mape" title="Link to this definition">¶</a></dt>
<dd><p>Plot which series are contributing most to SMAPE of final model. Avg of validations for best_model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>title</strong> (<em>str</em>) – plot title</p></li>
<li><p><strong>max_series</strong> (<em>int</em>) – max number of series to show on plot (sorted)</p></li>
<li><p><strong>max_name_chars</strong> (<em>str</em>) – if horizontal ensemble, will chop series names to this</p></li>
<li><p><strong>color</strong> (<em>str</em>) – hex or name of color of plot</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em>) – passed through to plot axis</p></li>
<li><p><strong>kind</strong> (<em>str</em>) – bar or pie</p></li>
<li><p><strong>pandas.plot</strong><strong>(</strong><strong>)</strong> (<em>**kwargs passed to</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_per_series_smape">
<span class="sig-name descname"><span class="pre">plot_per_series_smape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_name_chars</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'#ff9912'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(12,</span> <span class="pre">4)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'bar'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_per_series_smape" title="Link to this definition">¶</a></dt>
<dd><p>To be backwards compatible, not necessarily maintained, plot_per_series_mape is to be preferred.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_series_corr">
<span class="sig-name descname"><span class="pre">plot_series_corr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">15</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_series_corr" title="Link to this definition">¶</a></dt>
<dd><p>Plot series correlation. Data must be fit first.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cols</strong> (<em>list</em>) – strings of columns to show, ‘all’ for all, or int of number to sample</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_transformer_by_class">
<span class="sig-name descname"><span class="pre">plot_transformer_by_class</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">15</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'ModelClass'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_transformer_by_class" title="Link to this definition">¶</a></dt>
<dd><p>Using the best results (from exported template), plot usage of transformers by model class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template</strong> (<em>pd.DataFrame</em>) – template object of models to use for assesement, uses best 50 otherwise</p></li>
<li><p><strong>colors</strong> (<em>dict</em>) – color mapping of model class to color</p></li>
<li><p><strong>top_n</strong> (<em>int</em>) – number of most frequently used transformers to plot</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_transformer_failure_rate">
<span class="sig-name descname"><span class="pre">plot_transformer_failure_rate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_transformer_failure_rate" title="Link to this definition">¶</a></dt>
<dd><p>Failure Rate per Transformer type (ignoring ensembles), failure may be due to other model or transformer.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_unpredictability">
<span class="sig-name descname"><span class="pre">plot_unpredictability</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_wide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_unpredictability" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.plot_validations">
<span class="sig-name descname"><span class="pre">plot_validations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_wide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compare_horizontal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">include_bounds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.35</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'darkred'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'#A2AD9C'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.plot_validations" title="Link to this definition">¶</a></dt>
<dd><p>Similar to plot_backforecast but using the model’s validation segments specifically. Must reforecast.
Saves results to self.validation_forecasts and caches. Set validation_forecasts_template to None to force rerun otherwise it uses stored (when models is the same).
‘chosen’ refers to best_model_id, the model chosen to run for predict
Validation sections may overlap (depending on method) which can confuse graph readers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>models</strong> (<em>list</em>) – list, str, df or None, models to compare (IDs unless df of model params)</p></li>
<li><p><strong>series</strong> (<em>str</em>) – time series to graph</p></li>
<li><p><strong>title</strong> (<em>str</em>) – graph title</p></li>
<li><p><strong>start_date</strong> (<em>str</em>) – ‘auto’ or datetime, place to begin graph, None for full</p></li>
<li><p><strong>end_date</strong> (<em>str</em>) – ‘auto’ or datetime, end of graph x axis</p></li>
<li><p><strong>subset</strong> (<em>str</em>) – overrides series, shows either ‘best’ or ‘worst’</p></li>
<li><p><strong>compare_horizontal</strong> (<em>bool</em>) – if True, plot horizontal ensemble versus best non-horizontal model, when available</p></li>
<li><p><strong>include_bounds</strong> (<em>bool</em>) – if True (default) include the upper/lower forecast bounds</p></li>
<li><p><strong>start_color</strong> (<em>str</em>) – color of vline for val start marker, None to remove vline</p></li>
<li><p><strong>end_color</strong> (<em>str</em>) – color of vline for val end marker, None to remove vline</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'self'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'self'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hierarchy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">just_point_forecast</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fail_on_forecast_nan</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'self'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.predict" title="Link to this definition">¶</a></dt>
<dd><p>Generate forecast data immediately following dates of index supplied to .fit().</p>
<p>If using a model from update_fit list, with no ensembling, underlying model will not be retrained when used as below, with a single prediction interval:
This designed for high speed forecasting. Full retraining is best when there is sufficient time.
<code class="docutils literal notranslate"><span class="pre">`python</span>
<span class="pre">model</span> <span class="pre">=</span> <span class="pre">AutoTS(model_list='update_fit')</span>
<span class="pre">model.fit(df)</span>
<span class="pre">model.predict()</span>
<span class="pre">#</span> <span class="pre">for</span> <span class="pre">new</span> <span class="pre">data</span> <span class="pre">without</span> <span class="pre">retraining</span>
<span class="pre">model.fit_data(df)</span>
<span class="pre">model.predict()</span>
<span class="pre">#</span> <span class="pre">to</span> <span class="pre">force</span> <span class="pre">retrain</span> <span class="pre">of</span> <span class="pre">best</span> <span class="pre">model</span> <span class="pre">(but</span> <span class="pre">not</span> <span class="pre">full</span> <span class="pre">model</span> <span class="pre">search)</span>
<span class="pre">model.model</span> <span class="pre">=</span> <span class="pre">None</span>
<span class="pre">model.fit_data(df)</span>
<span class="pre">model.predict()</span>
<span class="pre">`</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>forecast_length</strong> (<em>int</em>) – Number of periods of data to forecast ahead</p></li>
<li><p><strong>prediction_interval</strong> (<em>float</em>) – <p>interval of upper/lower forecasts.
defaults to ‘self’ ie the interval specified in __init__()
if prediction_interval is a list, then returns a dict of forecast objects.</p>
<blockquote>
<div><p>{str(interval): prediction_object}</p>
</div></blockquote>
</p></li>
<li><p><strong>future_regressor</strong> (<em>numpy.Array</em>) – additional regressor</p></li>
<li><p><strong>hierarchy</strong> – Not yet implemented</p></li>
<li><p><strong>just_point_forecast</strong> (<em>bool</em>) – If True, return a pandas.DataFrame of just point forecasts</p></li>
<li><p><strong>fail_on_forecast_nan</strong> (<em>bool</em>) – if False, return forecasts even if NaN present, if True, raises error if any nan in forecast</p></li>
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – wide style df, if present, calls fit_data with this dataframe. Recommended strongly to use model.fit_data(df) first instead as it has more args.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Either a PredictionObject of forecasts and metadata, or
if just_point_forecast == True, a dataframe of point forecasts</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.results">
<span class="sig-name descname"><span class="pre">results</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result_set</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'initial'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.results" title="Link to this definition">¶</a></dt>
<dd><p>Convenience function to return tested models table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result_set</strong> (<em>str</em>) – ‘validation’ or ‘initial’</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.retrieve_validation_forecasts">
<span class="sig-name descname"><span class="pre">retrieve_validation_forecasts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">models</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">compare_horizontal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'SeriesID'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'Value'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interval_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'PredictionInterval'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.retrieve_validation_forecasts" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.save_template">
<span class="sig-name descname"><span class="pre">save_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">export_template</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.save_template" title="Link to this definition">¶</a></dt>
<dd><p>Helper function for the save part of export_template.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.AutoTS.validation_agg">
<span class="sig-name descname"><span class="pre">validation_agg</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.AutoTS.validation_agg" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.error_correlations">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_ts.</span></span><span class="sig-name descname"><span class="pre">error_correlations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_result</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'corr'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.error_correlations" title="Link to this definition">¶</a></dt>
<dd><p>Onehot encode AutoTS result df and return df or correlation with errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>all_results</strong> (<em>pandas.DataFrame</em>) – AutoTS model_results df</p></li>
<li><p><strong>result</strong> (<em>str</em>) – whether to return ‘df’, ‘corr’, ‘poly corr’ with errors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.auto_ts.fake_regressor">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.auto_ts.</span></span><span class="sig-name descname"><span class="pre">fake_regressor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">14</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">id_col</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'infer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggfunc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'first'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_most_recent</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">na_tolerance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.95</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">drop_data_older_than_periods</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dimensions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.auto_ts.fake_regressor" title="Link to this definition">¶</a></dt>
<dd><p>Create a fake regressor of random numbers for testing purposes.</p>
</dd></dl>

</section>
<section id="module-autots.evaluator.benchmark">
<span id="autots-evaluator-benchmark-module"></span><h2>autots.evaluator.benchmark module<a class="headerlink" href="#module-autots.evaluator.benchmark" title="Link to this heading">¶</a></h2>
<p>Created on Fri Nov  5 13:45:01 2021</p>
<p>&#64;author: Colin</p>
<dl class="py class">
<dt class="sig sig-object py" id="autots.evaluator.benchmark.Benchmark">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">autots.evaluator.benchmark.</span></span><span class="sig-name descname"><span class="pre">Benchmark</span></span><a class="headerlink" href="#autots.evaluator.benchmark.Benchmark" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.benchmark.Benchmark.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">times</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">123</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_models_only</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.benchmark.Benchmark.run" title="Link to this definition">¶</a></dt>
<dd><p>Run benchmark.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_jobs</strong> (<em>int</em>) – passed to model_forecast for n cpus</p></li>
<li><p><strong>times</strong> (<em>int</em>) – number of times to run benchmark models (returns avg of n times)</p></li>
<li><p><strong>random_seed</strong> (<em>int</em>) – random seed, increases consistency</p></li>
<li><p><strong>base_models_only</strong> (<em>bool</em>) – if True, doesn’t attempt Tensorflow, GluonTS, or Prophet models</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-autots.evaluator.event_forecasting">
<span id="autots-evaluator-event-forecasting-module"></span><h2>autots.evaluator.event_forecasting module<a class="headerlink" href="#module-autots.evaluator.event_forecasting" title="Link to this heading">¶</a></h2>
<p>Generate probabilities of forecastings crossing limit thresholds.
Created on Thu Jan 27 13:36:18 2022</p>
<dl class="py class">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.EventRiskForecast">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">autots.evaluator.event_forecasting.</span></span><span class="sig-name descname"><span class="pre">EventRiskForecast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_train</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'infer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.95</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'UnivariateMotif'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_param_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'distance_metric':</span> <span class="pre">'euclidean',</span> <span class="pre">'k':</span> <span class="pre">10,</span> <span class="pre">'pointed_method':</span> <span class="pre">'median',</span> <span class="pre">'return_result_windows':</span> <span class="pre">True,</span> <span class="pre">'window':</span> <span class="pre">14}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_transform_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'fillna':</span> <span class="pre">'pchip',</span> <span class="pre">'transformation_params':</span> <span class="pre">{'0':</span> <span class="pre">{'method':</span> <span class="pre">0.5},</span> <span class="pre">'1':</span> <span class="pre">{},</span> <span class="pre">'2':</span> <span class="pre">{'fixed':</span> <span class="pre">False,</span> <span class="pre">'window':</span> <span class="pre">7},</span> <span class="pre">'3':</span> <span class="pre">{}},</span> <span class="pre">'transformations':</span> <span class="pre">{'0':</span> <span class="pre">'Slice',</span> <span class="pre">'1':</span> <span class="pre">'DifferencedTransformer',</span> <span class="pre">'2':</span> <span class="pre">'RollingMeanTransformer',</span> <span class="pre">'3':</span> <span class="pre">'MaxAbsScaler'}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_forecast_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'max_generations':</span> <span class="pre">30,</span> <span class="pre">'n_jobs':</span> <span class="pre">'auto',</span> <span class="pre">'random_seed':</span> <span class="pre">321,</span> <span class="pre">'verbose':</span> <span class="pre">1}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_forecast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Generate a risk score (0 to 1, but usually close to 0) for a future event exceeding user specified upper or lower bounds.</p>
<p>Upper and lower limits can be one of four types, and may each be different.
1. None (no risk score calculated for this direction)
2. Float in range [0, 1] historic quantile of series (which is historic min and max at edges) is chosen as limit.
3. A dictionary of {“model_name”: x,  “model_param_dict”: y, “model_transform_dict”: z, “prediction_interval”: 0.9} to generate a forecast as the limits</p>
<blockquote>
<div><p>Primarily intended for simple forecasts like SeasonalNaive, but can be used with any AutoTS model</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>a custom input numpy array of shape (forecast_length, num_series)</p></li>
</ol>
<p>This can be used to find the “middle” limit too, flip so upper=lower and lower=upper, then abs(U - (1 - L)).
In some cases it may help to drop the results from the first forecast timestep or two.</p>
<p>This functions by generating multiple outcome forecast possiblities in two ways.
If a ‘Motif’ type model is passed, it uses all the k neighbors motifs as outcome paths (recommended)
All other AutoTS models will generate the possible outcomes by utilizing multiple prediction_intervals (more intervals = slower but more resolution).
The risk score is then the % of outcome forecasts which cross the limit.
(less than or equal for lower, greater than or equal for upper)</p>
<p>Only accepts <cite>wide</cite> style dataframe input.
Methods are class_methods and can be used standalone. They default to __init__ inputs, but can be overriden.
Results are usually a numpy array of shape (forecast_length, num_series)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_train</strong> (<em>pd.DataFrame</em>) – <a href="#id5"><span class="problematic" id="id6">`</span></a>wide style data, pd.DatetimeIndex for index and one series per column</p></li>
<li><p><strong>forecast_length</strong> (<em>int</em>) – number of forecast steps to make</p></li>
<li><p><strong>frequency</strong> (<em>str</em>) – frequency of timesteps</p></li>
<li><p><strong>prediction_interval</strong> (<em>float</em>) – float or list of floats for probabilistic forecasting
if a list, the first item in the list is the one used for .fit default</p></li>
<li><p><strong>model_forecast_kwargs</strong> (<em>dict</em>) – AutoTS kwargs to pass to generaet_result_windows, .fit_forecast, and forecast-style limits</p></li>
<li><p><strong>model_name</strong> – for model_forecast in generate_result_windows</p></li>
<li><p><strong>model_param_dict</strong> – for model_forecast in generate_result_windows</p></li>
<li><p><strong>model_transform_dict</strong> – for model_forecast in generate_result_windows</p></li>
<li><p><strong>future_regressor_train</strong> – regressor arrays if used</p></li>
<li><p><strong>future_regressor_forecast</strong> – regressor arrays if used</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.EventRiskForecast.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.fit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.EventRiskForecast.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.predict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.EventRiskForecast.predict_historic">
<span class="sig-name descname"><span class="pre">predict_historic</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.predict_historic" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.EventRiskForecast.generate_result_windows">
<span class="sig-name descname"><span class="pre">generate_result_windows</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.generate_result_windows" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.EventRiskForecast.generate_risk_array">
<span class="sig-name descname"><span class="pre">generate_risk_array</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.generate_risk_array" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.EventRiskForecast.generate_historic_risk_array">
<span class="sig-name descname"><span class="pre">generate_historic_risk_array</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.generate_historic_risk_array" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.EventRiskForecast.set_limit">
<span class="sig-name descname"><span class="pre">set_limit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.set_limit" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.EventRiskForecast.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.plot" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">result_windows,</span> <span class="pre">forecast_df,</span> <span class="pre">up_forecast_df,</span> <span class="pre">low_forecast_df</span></span></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">lower_limit_2d,</span> <span class="pre">upper_limit_2d,</span> <span class="pre">upper_risk_array,</span> <span class="pre">lower_risk_array</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">models_mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'event_risk'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['UnivariateMotif',</span> <span class="pre">'MultivariateMotif',</span> <span class="pre">'SectionalMotif',</span> <span class="pre">'ARCH',</span> <span class="pre">'MetricMotif',</span> <span class="pre">'SeasonalityMotif']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ensemble</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autots_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Link to this definition">¶</a></dt>
<dd><p>Shortcut for generating model params.</p>
<p>args specified are those suggested for an otherwise normal AutoTS run</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_train</strong> (<em>pd.DataFrame</em>) – wide style only</p></li>
<li><p><strong>model_method</strong> (<em>str</em>) – event_risk here is used by motif models</p></li>
<li><p><strong>model_list</strong> (<em>list</em>) – suggesting the use of motif models</p></li>
<li><p><strong>ensemble</strong> (<em>list</em>) – must be None or empty list to get motif result windows</p></li>
<li><p><strong>autots_kwargs</strong> (<em>dict</em>) – all other args passed in as kwargs
if None, defaults to class model_forecast_kwargs, for blank pass empty dict</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id7">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_historic_risk_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'upper'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id7" title="Link to this definition">¶</a></dt>
<dd><p>Given a df and a limit, returns a 0/1 array of whether limit was equaled or exceeded.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id8">
<span class="sig-name descname"><span class="pre">generate_result_windows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_param_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_transform_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_forecast_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_forecast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id8" title="Link to this definition">¶</a></dt>
<dd><p>For event risk forecasting. Params default to class init but can be overridden here.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>(num_samples/k, forecast_length, num_series/columns)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>result_windows (numpy.array)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id9">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_risk_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result_windows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'upper'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id9" title="Link to this definition">¶</a></dt>
<dd><p>Given a df and a limit, returns a 0/1 array of whether limit was equaled or exceeded.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id10">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grays</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['#838996',</span> <span class="pre">'#c0c0c0',</span> <span class="pre">'#dcdcdc',</span> <span class="pre">'#a9a9a9',</span> <span class="pre">'#808080',</span> <span class="pre">'#989898',</span> <span class="pre">'#808080',</span> <span class="pre">'#757575',</span> <span class="pre">'#696969',</span> <span class="pre">'#c9c0bb',</span> <span class="pre">'#c8c8c8',</span> <span class="pre">'#323232',</span> <span class="pre">'#e5e4e2',</span> <span class="pre">'#778899',</span> <span class="pre">'#4f666a',</span> <span class="pre">'#848482',</span> <span class="pre">'#414a4c',</span> <span class="pre">'#8a7f80',</span> <span class="pre">'#c4c3d0',</span> <span class="pre">'#bebebe',</span> <span class="pre">'#dbd7d2']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">up_low_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['#ff4500',</span> <span class="pre">'#ff5349']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bar_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'#6495ED'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bar_ylim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0.0,</span> <span class="pre">0.5]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(14,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_windows</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_limit_2d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_limit_2d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_risk_array</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_risk_array</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id10" title="Link to this definition">¶</a></dt>
<dd><p>Plot a sample of the risk forecast outcomes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column_idx</strong> (<em>int</em>) – positional index of series to sample for plot</p></li>
<li><p><strong>grays</strong> (<em>list</em><em> of </em><em>str</em>) – list of hex codes for colors for the potential forecasts</p></li>
<li><p><strong>up_low_colors</strong> (<em>list</em><em> of </em><em>str</em>) – two hex code colors for lower and upper</p></li>
<li><p><strong>bar_color</strong> (<em>str</em>) – hex color for bar graph</p></li>
<li><p><strong>bar_ylim</strong> (<em>list</em>) – passed to ylim of plot, sets scale of axis of barplot</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em>) – passed to figsize of output figure</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.EventRiskForecast.plot_eval">
<span class="sig-name descname"><span class="pre">plot_eval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_test</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">column_idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actuals_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['#00BFFF']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">up_low_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['#ff4500',</span> <span class="pre">'#ff5349']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bar_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'#6495ED'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bar_ylim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0.0,</span> <span class="pre">0.5]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(14,</span> <span class="pre">8)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_limit_2d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_limit_2d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_risk_array</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_risk_array</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.EventRiskForecast.plot_eval" title="Link to this definition">¶</a></dt>
<dd><p>Plot a sample of the risk forecast with known value vs risk score.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df_test</strong> (<em>pd.DataFrame</em>) – dataframe of known values (dt index, series)</p></li>
<li><p><strong>column_idx</strong> (<em>int</em>) – positional index of series to sample for plot</p></li>
<li><p><strong>actuals_color</strong> (<em>list</em><em> of </em><em>str</em>) – list of one hex code for line of known actuals</p></li>
<li><p><strong>up_low_colors</strong> (<em>list</em><em> of </em><em>str</em>) – two hex code colors for lower and upper</p></li>
<li><p><strong>bar_color</strong> (<em>str</em>) – hex color for bar graph</p></li>
<li><p><strong>bar_ylim</strong> (<em>list</em>) – passed to ylim of plot, sets scale of axis of barplot</p></li>
<li><p><strong>figsize</strong> (<em>tuple</em>) – passed to figsize of output figure</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id11">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#id11" title="Link to this definition">¶</a></dt>
<dd><p>Returns forecast upper, lower risk probability arrays for input limits.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id12">
<span class="sig-name descname"><span class="pre">predict_historic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">upper_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_limit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_periods</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id12" title="Link to this definition">¶</a></dt>
<dd><p>Returns upper, lower risk probability arrays for input limits for the historic data.
If manual numpy array limits are used, the limits will need to be appropriate shape (for df_train and eval_periods if used)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>upper_limit</strong> – if different than the version passed to init</p></li>
<li><p><strong>lower_limit</strong> – if different than the version passed to init</p></li>
<li><p><strong>eval_periods</strong> (<em>int</em>) – only assess the n most recent periods of history</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id13">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_shape</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_train</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'upper'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'forecast'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_periods</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id13" title="Link to this definition">¶</a></dt>
<dd><p>Handles all limit input styles and returns numpy array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>limit</strong> – see class overview for input options</p></li>
<li><p><strong>target_shape</strong> (<em>tuple</em>) – of (forecast_length, num_series)</p></li>
<li><p><strong>df_train</strong> (<em>pd.DataFrame</em>) – training data</p></li>
<li><p><strong>direction</strong> (<em>str</em>) – whether it is the “upper” or “lower” limit</p></li>
<li><p><strong>period</strong> (<em>str</em>) – “forecast” or “historic” only used for limits defined by forecast algorithm params</p></li>
<li><p><strong>forecast_length</strong> (<em>int</em>) – needed only for historic of forecast algorithm defined limit</p></li>
<li><p><strong>eval_periods</strong> (<em>int</em>) – only for historic forecast limit, only runs on the tail n (this) of data</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.extract_result_windows">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.event_forecasting.</span></span><span class="sig-name descname"><span class="pre">extract_result_windows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">forecasts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.extract_result_windows" title="Link to this definition">¶</a></dt>
<dd><p>standardize result windows from different models.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.extract_window_index">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.event_forecasting.</span></span><span class="sig-name descname"><span class="pre">extract_window_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">forecasts</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.extract_window_index" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.set_limit_forecast">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.event_forecasting.</span></span><span class="sig-name descname"><span class="pre">set_limit_forecast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_train</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'SeasonalNaive'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_param_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'lag_1':</span> <span class="pre">28,</span> <span class="pre">'lag_2':</span> <span class="pre">None,</span> <span class="pre">'method':</span> <span class="pre">'median'}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_transform_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'fillna':</span> <span class="pre">'nearest',</span> <span class="pre">'transformation_params':</span> <span class="pre">{},</span> <span class="pre">'transformations':</span> <span class="pre">{}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'infer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_forecast_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'n_jobs':</span> <span class="pre">'auto',</span> <span class="pre">'random_seed':</span> <span class="pre">321,</span> <span class="pre">'verbose':</span> <span class="pre">1}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_forecast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.set_limit_forecast" title="Link to this definition">¶</a></dt>
<dd><p>Helper function for forecast limits set by forecast algorithms.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.event_forecasting.set_limit_forecast_historic">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.event_forecasting.</span></span><span class="sig-name descname"><span class="pre">set_limit_forecast_historic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_train</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'SeasonalNaive'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_param_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'lag_1':</span> <span class="pre">28,</span> <span class="pre">'lag_2':</span> <span class="pre">None,</span> <span class="pre">'method':</span> <span class="pre">'median'}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_transform_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'fillna':</span> <span class="pre">'nearest',</span> <span class="pre">'transformation_params':</span> <span class="pre">{},</span> <span class="pre">'transformations':</span> <span class="pre">{}}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'infer'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_forecast_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{'n_jobs':</span> <span class="pre">'auto',</span> <span class="pre">'random_seed':</span> <span class="pre">321,</span> <span class="pre">'verbose':</span> <span class="pre">2}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">future_regressor_forecast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_periods</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.event_forecasting.set_limit_forecast_historic" title="Link to this definition">¶</a></dt>
<dd><p>Helper function for forecast limits set by forecast algorithms.</p>
</dd></dl>

</section>
<section id="module-autots.evaluator.metrics">
<span id="autots-evaluator-metrics-module"></span><h2>autots.evaluator.metrics module<a class="headerlink" href="#module-autots.evaluator.metrics" title="Link to this heading">¶</a></h2>
<p>Tools for calculating forecast errors.</p>
<dl class="simple">
<dt>Some common args:</dt><dd><p>A or actual (np.array): actuals ndim 2 (timesteps, series)
F or forecast (np.array): forecast values ndim 2 (timesteps, series)
ae (np.array): precalculated np.abs(A - F)</p>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.array_last_val">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">array_last_val</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.array_last_val" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.chi_squared_hist_distribution_loss">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">chi_squared_hist_distribution_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.chi_squared_hist_distribution_loss" title="Link to this definition">¶</a></dt>
<dd><p>Distribution loss, chi-squared distance from histograms.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.containment">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">containment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lower_forecast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_forecast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actual</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.containment" title="Link to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>forecast</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.contour">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">contour</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.contour" title="Link to this definition">¶</a></dt>
<dd><p>A measure of how well the actual and forecast follow the same pattern of change.
<em>Note:</em> If actual values are unchanging, will match positive changing forecasts.
This is faster, and because if actuals are a flat line, contour probably isn’t a concern regardless.</p>
<p># bluff tops follow the shape of the river below, at different elevation</p>
<p>Expects two, 2-D numpy arrays of forecast_length * n series
Returns a 1-D array of results in len n series</p>
<p>NaNs diffs are filled with 0, essentially equiavelent to assuming a forward fill of NaN</p>
<p>Concat the last row of history to head of both A and F (req for 1 step)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.default_scaler">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">default_scaler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df_train</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.default_scaler" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.dwae">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">dwae</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_of_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.dwae" title="Link to this definition">¶</a></dt>
<dd><p>Direcitonal Weighted Absolute Error, the accuracy of growth or decline relative to most recent data.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.full_metric_evaluation">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">full_metric_evaluation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_forecast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_forecast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_train</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prediction_interval</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaler</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_components</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cumsum_A</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diff_A</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_of_array</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">custom_metric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.full_metric_evaluation" title="Link to this definition">¶</a></dt>
<dd><p>Create a pd.DataFrame of metrics per series given actuals, forecast, and precalculated errors.
There are some extra args which are precomputed metrics for efficiency in loops, don’t worry about them.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>np.array</em>) – array or df of actuals</p></li>
<li><p><strong>F</strong> (<em>np.array</em>) – array or df of forecasts</p></li>
<li><p><strong>return_components</strong> (<em>bool</em>) – if True, return tuple of detailed errors</p></li>
<li><p><strong>metric</strong> (<em>custom</em>) – a function to generate a custom metric. Expects func(A, F, df_train, prediction_interval) where the first three are np arrays of wide style 2d.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.kde">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">kde</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actuals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecasts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandwidth</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.kde" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.kde_kl_distance">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">kde_kl_distance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandwidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.kde_kl_distance" title="Link to this definition">¶</a></dt>
<dd><p>Distribution loss by means of KDE and KL Divergence.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.kl_divergence">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">kl_divergence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.kl_divergence" title="Link to this definition">¶</a></dt>
<dd><p>Compute KL Divergence between two distributions.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.linearity">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">linearity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.linearity" title="Link to this definition">¶</a></dt>
<dd><p>Score perecentage of a np.array with linear progression, along the index (0) axis.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.mae">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">mae</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ae</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mae" title="Link to this definition">¶</a></dt>
<dd><p>Accepting abs error already calculated</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.mda">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">mda</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mda" title="Link to this definition">¶</a></dt>
<dd><p>A measure of how well the actual and forecast follow the same pattern of change.
Expects two, 2-D numpy arrays of forecast_length * n series
Returns a 1-D array of results in len n series</p>
<p>NaNs diffs are filled with 0, essentially equiavelent to assuming a forward fill of NaN</p>
<p>Concat the last row of history to head of both A and F (req for 1 step)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.mean_absolute_differential_error">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">mean_absolute_differential_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaler</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mean_absolute_differential_error" title="Link to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
<li><p><strong>order</strong> (<em>int</em>) – order of differential</p></li>
<li><p><strong>df_train</strong> (<em>np.array</em>) – if provided, uses this as starting point for first diff step.
Tail(1) must be most recent historical point before forecast.
Must be numpy Array not DataFrame.
Highly recommended if using this as the sole optimization metric.
Without, it is an “unanchored” shape fitting metric.
This will also allow this to work on forecast_length = 1 forecasts</p></li>
<li><p><strong>scaler</strong> (<em>np.array</em>) – if provided, metrics are scaled by this. 1d array of shape (num_series,)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.mean_absolute_error">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">mean_absolute_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mean_absolute_error" title="Link to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.medae">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">medae</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ae</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.medae" title="Link to this definition">¶</a></dt>
<dd><p>Accepting abs error already calculated</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.median_absolute_error">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">median_absolute_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.median_absolute_error" title="Link to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>F</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.mlvb">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">mlvb</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_of_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mlvb" title="Link to this definition">¶</a></dt>
<dd><p>Mean last value baseline, the % difference of forecast vs last value naive forecast.
Does poorly with near-zero values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>np.array</em>) – actuals</p></li>
<li><p><strong>F</strong> (<em>np.array</em>) – forecast values</p></li>
<li><p><strong>last_of_array</strong> (<em>np.array</em>) – the last row of the historic training data, most recent values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.mqae">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">mqae</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ae</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.85</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.mqae" title="Link to this definition">¶</a></dt>
<dd><p>Return the mean of errors less than q quantile of the errors per series.
np.nans count as largest values, and so are removed as part of the &gt; q group.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.msle">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">msle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">full_errors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ae</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">le</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.msle" title="Link to this definition">¶</a></dt>
<dd><p>input is array of y_pred - y_true to over-penalize underestimate.
Use instead y_true - y_pred to over-penalize overestimate.
AE used here for the log just to avoid divide by zero warnings (values aren’t used either way)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.numpy_ffill">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">numpy_ffill</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.numpy_ffill" title="Link to this definition">¶</a></dt>
<dd><p>Fill np.nan forward down the zero axis.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.oda">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">oda</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">last_of_array</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.oda" title="Link to this definition">¶</a></dt>
<dd><p>Origin Directional Accuracy, the accuracy of growth or decline relative to most recent data.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.pinball_loss">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">pinball_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.pinball_loss" title="Link to this definition">¶</a></dt>
<dd><p>Bigger is bad-er.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.precomp_wasserstein">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">precomp_wasserstein</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cumsum_A</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.precomp_wasserstein" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.qae">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">qae</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ae</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.qae" title="Link to this definition">¶</a></dt>
<dd><p>Return the q quantile of the errors per series.
np.nans count as smallest values and will push more values into the exclusion group.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.rmse">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">rmse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sqe</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.rmse" title="Link to this definition">¶</a></dt>
<dd><p>Accepting squared error already calculated</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.root_mean_square_error">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">root_mean_square_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.root_mean_square_error" title="Link to this definition">¶</a></dt>
<dd><p>Expects two, 2-D numpy arrays of forecast_length * n series.</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>forecast</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.rps">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">rps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">predictions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observed</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.rps" title="Link to this definition">¶</a></dt>
<dd><p>Vectorized version of Ranked Probability Score.
A lower value is a better score.
From: Colin Catlin, <a class="reference external" href="https://syllepsis.live/2022/01/22/ranked-probability-score-in-python/">https://syllepsis.live/2022/01/22/ranked-probability-score-in-python/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>predictions</strong> (<em>pd.DataFrame</em>) – each column is an outcome category, with values as the 0 to 1 probability of that category</p></li>
<li><p><strong>observed</strong> (<em>pd.DataFrame</em>) – each column is an outcome category, with values of 0 OR 1 with 1 being that category occurred</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.scaled_pinball_loss">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">scaled_pinball_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_train</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quantile</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.scaled_pinball_loss" title="Link to this definition">¶</a></dt>
<dd><p>Scaled pinball loss.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>A</strong> (<em>np.array</em>) – actual values</p></li>
<li><p><strong>F</strong> (<em>np.array</em>) – forecast values</p></li>
<li><p><strong>df_train</strong> (<em>np.array</em>) – values of historic data for scaling</p></li>
<li><p><strong>quantile</strong> (<em>float</em>) – which bound of upper/lower forecast this is</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.smape">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">smape</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ae</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nan_flag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.smape" title="Link to this definition">¶</a></dt>
<dd><p>Accepting abs error already calculated</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.smoothness">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">smoothness</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.smoothness" title="Link to this definition">¶</a></dt>
<dd><p>A gradient measure of linearity, where 0 is linear and larger values are more volatile.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.spl">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">spl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">precomputed_spl</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scaler</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.spl" title="Link to this definition">¶</a></dt>
<dd><p>Accepting most of it already calculated</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.symmetric_mean_absolute_percentage_error">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">symmetric_mean_absolute_percentage_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.symmetric_mean_absolute_percentage_error" title="Link to this definition">¶</a></dt>
<dd><p>Expect two, 2-D numpy arrays of forecast_length * n series.
Allows NaN in actuals, and corresponding NaN in forecast, but not unmatched NaN in forecast
Also doesn’t like zeroes in either forecast or actual - results in poor error value even if forecast is accurate</p>
<p>Returns a 1-D array of results in len n series</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual</strong> (<em>numpy.array</em>) – known true values</p></li>
<li><p><strong>forecast</strong> (<em>numpy.array</em>) – predicted values</p></li>
</ul>
</dd>
</dl>
<p class="rubric">References</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Symmetric_mean_absolute_percentage_error">https://en.wikipedia.org/wiki/Symmetric_mean_absolute_percentage_error</a></p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.threshold_loss">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">threshold_loss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actual</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">penalty_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.threshold_loss" title="Link to this definition">¶</a></dt>
<dd><p>Run once for overestimate then again for underestimate. Add both for combined view.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>actual/forecast</strong> – 2D wide style data DataFrame or np.array</p></li>
<li><p><strong>threshold</strong> – (0, 2), 0.9 (penalize 10% and greater underestimates) and 1.1 (penalize overestimate over 10%)</p></li>
<li><p><strong>penalty_threshold</strong> – defaults to same as threshold, adjust strength of penalty</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.unsorted_wasserstein">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">unsorted_wasserstein</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.unsorted_wasserstein" title="Link to this definition">¶</a></dt>
<dd><p>Also known as earth moving distance.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.metrics.wasserstein">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.metrics.</span></span><span class="sig-name descname"><span class="pre">wasserstein</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">A</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.metrics.wasserstein" title="Link to this definition">¶</a></dt>
<dd><p>This version has sorting, which is perhaps less relevant on average than the unsorted.</p>
</dd></dl>

</section>
<section id="module-autots.evaluator.validation">
<span id="autots-evaluator-validation-module"></span><h2>autots.evaluator.validation module<a class="headerlink" href="#module-autots.evaluator.validation" title="Link to this heading">¶</a></h2>
<p>Extracted from auto_ts.py, the functions to create validation segments.</p>
<p>Warning, these are used in AMFM, possibly other places. Avoid modification of function structures, if possible.</p>
<p>Created on Mon Jan 16 11:36:01 2023</p>
<p>&#64;author: Colin</p>
<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.validation.extract_seasonal_val_periods">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.validation.</span></span><span class="sig-name descname"><span class="pre">extract_seasonal_val_periods</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validation_method</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.validation.extract_seasonal_val_periods" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.validation.generate_validation_indices">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.validation.</span></span><span class="sig-name descname"><span class="pre">generate_validation_indices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validation_method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_validations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_wide_numeric</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">preclean</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.validation.generate_validation_indices" title="Link to this definition">¶</a></dt>
<dd><p>generate validation indices (equals num_validations + 1 as includes initial eval).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>validation_method</strong> (<em>str</em>) – ‘backwards’, ‘even’, ‘similarity’, ‘seasonal’, ‘seasonal 364’, etc.</p></li>
<li><p><strong>forecast_length</strong> (<em>int</em>) – number of steps ahead for forecast</p></li>
<li><p><strong>num_validations</strong> (<em>int</em>) – number of additional vals after first eval sample</p></li>
<li><p><strong>df_wide_numeric</strong> (<em>pd.DataFrame</em>) – pandas DataFrame with a dt index and columns as time series</p></li>
<li><p><strong>preclean</strong> (<em>dict</em>) – transformer dict, used for similarity cleaning</p></li>
<li><p><strong>verbose</strong> (<em>int</em>) – verbosity</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="autots.evaluator.validation.validate_num_validations">
<span class="sig-prename descclassname"><span class="pre">autots.evaluator.validation.</span></span><span class="sig-name descname"><span class="pre">validate_num_validations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validation_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'backwards'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_validations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_wide_numeric</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">forecast_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_allowed_train_percent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#autots.evaluator.validation.validate_num_validations" title="Link to this definition">¶</a></dt>
<dd><p>Check how many validations are possible given the length of the data. Beyond initial eval split which is always assumed.</p>
</dd></dl>

</section>
<section id="module-autots.evaluator">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-autots.evaluator" title="Link to this heading">¶</a></h2>
<p>Model Evaluators</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/autots_logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Automated Forecasting</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=winedarksea&repo=autots&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html#autots">AutoTS</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html#extended-tutorial">Extended Tutorial</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">autots</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="autots.html">autots package</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="modules.html">autots</a><ul>
  <li><a href="autots.html">autots package</a><ul>
      <li>Previous: <a href="autots.datasets.html" title="previous chapter">autots.datasets package</a></li>
      <li>Next: <a href="autots.models.html" title="next chapter">autots.models package</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2024, Colin Catlin.
      
      |
      <a href="../_sources/source/autots.evaluator.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>